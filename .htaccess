AddDefaultCharset UTF-8
RewriteEngine On
RewriteBase /

RewriteCond %{THE_REQUEST} ^(?:GET\ \/)(?:index\.php|)\?page=search&vType=(\d+)&vManuf=(\d+)&vFedDistr=(\d+)[\/]?
RewriteRule ^ /search/%1/%2/%3/\? [R=301,L]

RewriteRule ^unit\/(\d+)[/]?$ /?page=unit&id=$1
RewriteRule ^search\/(\d+)[/]?$ /?page=search&vType=$1
RewriteRule ^search\/(\d+)\/(\d+)\/(\d+)[/]?$ /?page=search&vType=$1&vManuf=$2&vFedDistr=$3 [L]
RewriteRule ^search\/(\d+)\/(\d+)\/(\d+)\/(\d+)[/]?$ /?page=search&vType=$1&vManuf=$2&vFedDistr=$3&offset=$4
RewriteRule ^(copyright|404|error|about|logout)[/]?$ /?page=$1

ErrorDocument 404 /?page=404

<FilesMatch "robots.txt$">
    RewriteEngine off
</FilesMatch>

# force ssl
RewriteCond     %{SERVER_PORT} ^80$
RewriteRule     ^(.*)$ https://%{SERVER_NAME}%{REQUEST_URI} [L,R=301]

RewriteRule     ^sitemap\.xml$ https://%{SERVER_NAME}/?page=sitemap [L,r=301]

<IfModule mod_deflate.c>
    <filesMatch "\.(js|css|html|php)$">
        SetOutputFilter DEFLATE
    </filesMatch>
</IfModule>

<IfModule mod_expires.c>
  ExpiresActive on
  ExpiresByType image/jpg "access 2 month"
  ExpiresByType image/gif "access 2 month"
  ExpiresByType image/jpeg "access 2 month"
  ExpiresByType image/png "access 2 month"
  ExpiresByType text/css "access 2 month"
  ExpiresByType application/x-javascript "access plus 2 month"
  ExpiresByType text/javascript "access plus 2 month"
  ExpiresByType application/javascript "access plus 2 month"
  ExpiresByType image/x-icon "access plus 12 month"
  ExpiresByType image/icon "access plus 12 month"
  ExpiresByType application/x-ico "access plus 12 month"
  ExpiresByType application/ico "access plus 12 month"
</IfModule>
